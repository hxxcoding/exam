(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75be7d1a"],{"05e9":function(t,e,a){"use strict";a("fc36")},"14a5":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return i}));var n=function(t,e){var a="1.23452384164.123412415";null!==document.getElementById(a)&&document.body.removeChild(document.getElementById(a));var n=document.createElement("canvas");n.width=200,n.height=120;var r=n.getContext("2d");r.rotate(-20*Math.PI/180),r.font="16px Vedana",r.fillStyle="#666666",r.textAlign="center",r.textBaseline="Middle",r.fillText(t,n.width/2,n.height),r.fillText(e,n.width/2,n.height+22);var i=document.createElement("div");return i.id=a,i.style.pointerEvents="none",i.style.top="0px",i.style.left="0px",i.style.opacity="0.15",i.style.position="fixed",i.style.zIndex="100000",i.style.width=document.documentElement.clientWidth+"px",i.style.height=document.documentElement.clientHeight+"px",i.style.background="url("+n.toDataURL("image/png")+") left top repeat",document.body.appendChild(i),a},r=function(t,e){var a=n(t,e);null===document.getElementById(a)&&(a=n(t,e))},i=function(){var t="1.23452384164.123412415";null!==document.getElementById(t)&&document.body.removeChild(document.getElementById(t))}},"2f21":function(t,e,a){"use strict";var n=a("79e5");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3200:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return i})),a.d(e,"f",(function(){return s})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"e",(function(){return o}));var n=a("b775");function r(t){return Object(n["b"])("/exam/api/paper/paper/create-paper",t)}function i(t){return Object(n["b"])("/exam/api/paper/paper/paper-detail",t)}function s(t){return Object(n["b"])("/exam/api/paper/paper/qu-detail",t)}function l(t){return Object(n["b"])("/exam/api/paper/paper/fill-answer",t)}function c(t){return Object(n["b"])("/exam/api/paper/paper/hand-exam",t)}function o(t){return Object(n["b"])("/exam/api/paper/paper/paper-result",t)}},"55dd":function(t,e,a){"use strict";var n=a("5ca1"),r=a("d8e8"),i=a("4bf8"),s=a("79e5"),l=[].sort,c=[1,2,3];n(n.P+n.F*(s((function(){c.sort(void 0)}))||!s((function(){c.sort(null)}))||!a("2f21")(l)),"Array",{sort:function(t){return void 0===t?l.call(i(this)):l.call(i(this),r(t))}})},"70fe":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-card",{staticStyle:{"margin-bottom":"10px"}},[t._v(" 距离考试结束还有："),a("exam-timer",{on:{timeout:function(e){return t.doHandler()}},model:{value:t.paperData.leftSeconds,callback:function(e){t.$set(t.paperData,"leftSeconds",e)},expression:"paperData.leftSeconds"}}),a("el-button",{staticStyle:{float:"right","margin-top":"-10px"},attrs:{type:"warning",icon:"el-icon-plus",loading:t.loading},on:{click:function(e){return t.handHandExam()}}},[t._v(" "+t._s(t.handleText)+" ")])],1)],1),a("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:6,xs:24}},[a("el-card",[a("p",{staticClass:"card-title"},[t._v("答题卡")]),a("el-row",{staticClass:"card-line",staticStyle:{"padding-left":"10px"},attrs:{gutter:24}},[a("el-tag",{attrs:{type:"info"}},[t._v("未作答")]),a("el-tag",{attrs:{type:"success"}},[t._v("已作答")])],1),void 0!==t.paperData.radioList&&t.paperData.radioList.length>0?a("div",[a("p",{staticClass:"card-title"},[t._v("单选题")]),a("el-row",{staticClass:"card-line",attrs:{gutter:24}},t._l(t.paperData.radioList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(" "+t._s(e.sort+1))])})),1)],1):t._e(),void 0!==t.paperData.multiList&&t.paperData.multiList.length>0?a("div",[a("p",{staticClass:"card-title"},[t._v("多选题")]),a("el-row",{staticClass:"card-line",attrs:{gutter:24}},t._l(t.paperData.multiList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(t._s(e.sort+1))])})),1)],1):t._e(),void 0!==t.paperData.judgeList&&t.paperData.judgeList.length>0?a("div",[a("p",{staticClass:"card-title"},[t._v("判断题")]),a("el-row",{staticClass:"card-line",attrs:{gutter:24}},t._l(t.paperData.judgeList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(t._s(e.sort+1))])})),1)],1):t._e(),void 0!==t.paperData.blankList&&t.paperData.blankList.length>0?a("div",[a("p",{staticClass:"card-title"},[t._v("填空题")]),a("el-row",{staticClass:"card-line",attrs:{gutter:24}},t._l(t.paperData.blankList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(t._s(e.sort+1))])})),1)],1):t._e(),void 0!==t.paperData.wordList&&t.paperData.wordList.length>0?a("div",[a("p",{staticClass:"card-title"},[t._v("操作题")]),a("el-row",{staticClass:"card-line",attrs:{gutter:24}},[t._l(t.paperData.wordList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(t._s(e.sort+1))])})),t._l(t.paperData.excelList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(t._s(e.sort+1))])})),t._l(t.paperData.pptList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(t._s(e.sort+1))])}))],2)],1):t._e()],1)],1),a("el-col",{attrs:{span:18,xs:24}},[a("el-card",{staticClass:"qu-content"},[t.quData.content?a("p",[t._v(t._s(t.quData.sort+1)+"."),a("span",{domProps:{innerHTML:t._s(t.quData.content)}})]):t._e(),null!=t.quData.image&&""!==t.quData.image?a("div",[a("el-link",{staticStyle:{"margin-bottom":"10px"},attrs:{href:t.quData.image,type:"primary",target:"_blank",icon:"el-icon-files",underline:!0}},[t._v(" 点击下载附件 ")])],1):t._e(),1===t.quData.quType||3===t.quData.quType?a("div",[a("el-radio-group",{model:{value:t.radioValue,callback:function(e){t.radioValue=e},expression:"radioValue"}},t._l(t.quData.answerList,(function(e){return a("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.abc)+"."+t._s(e.content)+" "),null!=e.image&&""!==e.image?a("div",{staticStyle:{clear:"both"}},[a("el-image",{staticStyle:{"max-width":"100%"},attrs:{src:e.image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("el-link",{attrs:{href:e.image,type:"primary",target:"_blank",icon:"el-icon-files",underline:!0}},[t._v(" 点击下载附件 ")])],1)])],1):t._e()])})),1)],1):t._e(),2===t.quData.quType?a("div",[a("el-checkbox-group",{model:{value:t.multiValue,callback:function(e){t.multiValue=e},expression:"multiValue"}},t._l(t.quData.answerList,(function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.abc)+"."+t._s(e.content)+" "),null!=e.image&&""!==e.image?a("div",{staticStyle:{clear:"both"}},[a("el-image",{staticStyle:{"max-width":"100%"},attrs:{src:e.image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("el-link",{attrs:{href:e.image,type:"success",target:"_blank",icon:"el-icon-files",underline:!0}},[t._v(" 点击下载附件 ")])],1)])],1):t._e()])})),1)],1):t._e(),5===t.quData.quType?a("div",[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"large",placeholder:"请输入答案",clearable:""},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1):t._e(),t.quData.quType>=10?a("div",[a("file-upload",{attrs:{"list-type":"office-file",tips:"请仔细读题,根据题目要求上传.xlsx/.docx/.pptx文件",accept:".xlsx, .docx, .pptx"},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1):t._e()]),a("div",{staticStyle:{"margin-top":"20px"}},[t.showPrevious?a("el-button",{attrs:{type:"primary",icon:"el-icon-back"},on:{click:function(e){return t.handPrevious()}}},[t._v(" 上一题 ")]):t._e(),t.showNext?a("el-button",{attrs:{type:"warning",icon:"el-icon-right"},on:{click:function(e){return t.handNext()}}},[t._v(" 下一题 ")]):t._e()],1)],1)],1)],1)},r=[],i=(a("55dd"),a("ac6a"),a("7f7f"),a("db72")),s=a("3200"),l=a("5c96"),c=a("2a75"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticStyle:{color:"#ff0000","font-weight":"700"}},[t._v(t._s(t.hour)+"时"+t._s(t.min)+"分钟"+t._s(t.sec)+"秒")])},u=[],d=(a("c5f6"),{name:"ExamTimer",props:{value:Number},data:function(){return{leftSeconds:0,min:"00",sec:"00"}},watch:{value:{handler:function(){this.leftSeconds=this.value,this.countdown()}}},created:function(){this.leftSeconds=this.value},methods:{countdown:function(){if(this.leftSeconds<0)this.$emit("timeout");else{var t=parseInt(this.leftSeconds/3600),e=parseInt(this.leftSeconds/60%60),a=parseInt(this.leftSeconds%60);this.hour=t>9?t:"0"+t,this.min=e>9?e:"0"+e,this.sec=a>9?a:"0"+a,this.leftSeconds-=1;var n=this;setTimeout((function(){n.countdown()}),1e3)}}}}),p=d,f=a("2877"),h=Object(f["a"])(p,o,u,!1,null,null,null),m=h.exports,v=a("14a5"),g=a("2f62"),w=a("93bf"),b=a.n(w),y={name:"ExamProcess",components:{FileUpload:c["a"],ExamTimer:m},data:function(){return{isFullscreen:!1,showPrevious:!1,showNext:!0,loading:!1,handleText:"交卷",pageLoading:!1,paperId:"",cardItem:{},allItem:[],quData:{answerList:[]},paperData:{leftSeconds:99999,radioList:[],multiList:[],judgeList:[],blankList:[],wordList:[],excelList:[],pptList:[]},radioValue:"",multiValue:[],answer:"",answeredIds:[]}},computed:Object(i["a"])({},Object(g["b"])(["sidebar","avatar","device","name","realName"])),mounted:function(){Object(v["b"])(this.realName,this.name),window.addEventListener("beforeunload",this.beforeUnloadHandler,!1)},destroyed:function(){Object(v["a"])(),window.removeEventListener("beforeunload",this.beforeUnloadHandler,!1)},created:function(){b.a.toggle();var t=this.$route.params.id;"undefined"!==typeof t&&(this.paperId=t,this.fetchData(t))},methods:{beforeUnloadHandler:function(t){t.returnValue="离开此页面？"},cardItemClass:function(t,e){return e===this.cardItem.quId?"warning":t?"success":t?void 0:"info"},countNotAnswered:function(){var t=0;return this.paperData.radioList.forEach((function(e){e.answered||(t+=1)})),this.paperData.multiList.forEach((function(e){e.answered||(t+=1)})),this.paperData.judgeList.forEach((function(e){e.answered||(t+=1)})),this.paperData.blankList.forEach((function(e){e.answered||(t+=1)})),this.paperData.wordList.forEach((function(e){e.answered||(t+=1)})),this.paperData.excelList.forEach((function(e){e.answered||(t+=1)})),this.paperData.pptList.forEach((function(e){e.answered||(t+=1)})),t},handNext:function(){var t=this.cardItem.sort+1;this.handSave(this.allItem[t])},handPrevious:function(){var t=this.cardItem.sort-1;this.handSave(this.allItem[t])},doHandler:function(){var t=this;this.handleText="正在交卷，请等待...",this.loading=!0;var e={id:this.paperId};Object(s["c"])(e).then((function(){t.$message({message:"试卷提交成功！",type:"success"}),t.isFullscreen=!t.isFullscreen,b.a.toggle(),t.$router.push({name:"ExamOnline"})}))},handHandExam:function(){var t=this;this.handSave(this.cardItem,(function(){var e=t.countNotAnswered(),a="确认要交卷吗？";e>0&&(a="您还有"+e+"题未作答，确认要交卷吗?"),t.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.doHandler()})).catch((function(){t.$message({type:"info",message:"交卷已取消，您可以继续作答！"})}))}))},handSave:function(t,e){var a=this;t.id===this.allItem[0].id?this.showPrevious=!1:this.showPrevious=!0;var n=this.allItem.length-1;t.id===this.allItem[n].id?this.showNext=!1:this.showNext=!0;var r=this.multiValue;""!==this.radioValue&&r.push(this.radioValue);var i={quType:this.cardItem.quType,paperId:this.paperId,quId:this.cardItem.quId,answers:r,answer:this.cardItem.quType>=10||5===this.cardItem.quType?this.answer:""};Object(s["b"])(i).then((function(){r.length>0||""!==i.answer?a.cardItem.answered=!0:a.cardItem.answered=!1,e&&e(),a.fetchQuData(t)}))},fetchQuData:function(t){var e=this,a=l["Loading"].service({text:"拼命加载中",background:"rgba(0, 0, 0, 0.7)"});this.cardItem=t;var n={paperId:this.paperId,quId:t.quId};Object(s["f"])(n).then((function(t){e.quData=t.data,e.radioValue="",e.multiValue=[],e.quData.answerList.forEach((function(t){1!==e.quData.quType&&3!==e.quData.quType||!t.checked||(e.radioValue=t.id),2===e.quData.quType&&t.checked&&e.multiValue.push(t.id)})),(e.quData.quType>=10||5===e.quData.quType)&&(e.answer=e.quData.answer),a.close()}))},fetchData:function(t){var e=this,a={id:t};Object(s["d"])(a).then((function(t){e.paperData=t.data,e.paperData.radioList?e.cardItem=e.paperData.radioList[0]:e.paperData.multiList?e.cardItem=e.paperData.multiList[0]:e.paperData.judgeList?e.cardItem=e.paperData.judgeList[0]:e.paperData.blankList?e.cardItem=e.paperData.blankList[0]:e.paperData.wordList?e.cardItem=e.paperData.wordList[0]:e.paperData.excelList?e.cardItem=e.paperData.excelList[0]:e.paperData.pptList&&(e.cardItem=e.paperData.pptList[0]);var a=e;e.paperData.radioList.forEach((function(t){a.allItem.push(t)})),e.paperData.multiList.forEach((function(t){a.allItem.push(t)})),e.paperData.judgeList.forEach((function(t){a.allItem.push(t)})),e.paperData.blankList.forEach((function(t){a.allItem.push(t)})),e.paperData.wordList.forEach((function(t){a.allItem.push(t)})),e.paperData.excelList.forEach((function(t){a.allItem.push(t)})),e.paperData.pptList.forEach((function(t){a.allItem.push(t)})),e.fetchQuData(e.cardItem)}))}}},D=y,_=(a("05e9"),Object(f["a"])(D,n,r,!1,null,"7dbb164e",null));e["default"]=_.exports},fc36:function(t,e,a){}}]);