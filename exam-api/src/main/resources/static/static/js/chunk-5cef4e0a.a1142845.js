(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5cef4e0a"],{"14a5":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return r}));var i=function(t,e){var a="1.23452384164.123412415";null!==document.getElementById(a)&&document.body.removeChild(document.getElementById(a));var i=document.createElement("canvas");i.width=200,i.height=120;var n=i.getContext("2d");n.rotate(-20*Math.PI/180),n.font="16px Vedana",n.fillStyle="#666666",n.textAlign="center",n.textBaseline="Middle",n.fillText(t,i.width/2,i.height),n.fillText(e,i.width/2,i.height+22);var r=document.createElement("div");return r.id=a,r.style.pointerEvents="none",r.style.top="0px",r.style.left="0px",r.style.opacity="0.15",r.style.position="fixed",r.style.zIndex="100000",r.style.width=document.documentElement.clientWidth+"px",r.style.height=document.documentElement.clientHeight+"px",r.style.background="url("+i.toDataURL("image/png")+") left top repeat",document.body.appendChild(r),a},n=function(t,e){var a=i(t,e);null===document.getElementById(a)&&(a=i(t,e))},r=function(){var t="1.23452384164.123412415";null!==document.getElementById(t)&&document.body.removeChild(document.getElementById(t))}},"2a75":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("file-upload-local",{attrs:{accept:t.accept,tips:t.tips,"list-type":t.listType},model:{value:t.fileUrl,callback:function(e){t.fileUrl=e},expression:"fileUrl"}})],1)},n=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("el-upload",{attrs:{action:t.server,accept:t.accept,"before-remove":t.beforeRemove,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,drag:"picture"!==t.listType,limit:t.limit,headers:t.header,"file-list":t.fileList,"list-type":t.listType},model:{value:t.fileUrl,callback:function(e){t.fileUrl=e},expression:"fileUrl"}},["picture"===t.listType?a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]):t._e(),"picture"!==t.listType?a("i",{staticClass:"el-icon-upload"}):t._e(),"picture"!==t.listType?a("div",{staticClass:"el-upload__text"},[t._v(" 将文件拖到此处，或 "),a("em",[t._v("点击上传")])]):t._e(),t.tips?a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.tips))]):t._e()],1)],1)},s=[],l=(a("c5f6"),a("5f87")),c={name:"FileUploadLocal",props:{value:String,accept:String,tips:String,listType:String,limit:{type:Number,default:1}},data:function(){return{server:"".concat("","/common/api/file/upload"),fileList:[],fileUrl:"",header:{}}},watch:{value:{handler:function(){this.fillValue()}}},created:function(){this.fillValue(),this.header={token:Object(l["a"])()}},methods:{fillValue:function(){this.fileList=[],this.fileUrl=this.value,this.fileUrl&&(this.fileList=[{name:this.fileUrl,url:this.fileUrl}])},handleExceed:function(){this.$message.warning("每次只能上传 ".concat(this.limit," 个文件"))},beforeRemove:function(){return this.$confirm("确定移除文件吗？","提示")},handleRemove:function(){this.$emit("input",""),this.fileList=[]},handleSuccess:function(t){if(1===t.code)return this.$message({type:"error",message:t.msg}),void(this.fileList=[]);this.$emit("input",t.data.url)}}},o=c,u=a("2877"),d=Object(u["a"])(o,r,s,!1,null,null,null),p=d.exports,f={name:"FileUpload",components:{FileUploadLocal:p},props:{value:String,accept:{type:String,default:"*"},tips:String,listType:{type:String,default:"picture"}},data:function(){return{fileUrl:""}},watch:{value:{handler:function(){this.fillValue()}},fileUrl:{handler:function(){this.$emit("input",this.fileUrl)}}},mounted:function(){},created:function(){this.fillValue()},methods:{fillValue:function(){this.fileUrl=this.value}}},h=f,m=Object(u["a"])(h,i,n,!1,null,null,null);e["a"]=m.exports},"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3200:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"d",(function(){return r})),a.d(e,"f",(function(){return s})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"e",(function(){return o}));var i=a("b775");function n(t){return Object(i["b"])("/exam/api/paper/paper/create-paper",t)}function r(t){return Object(i["b"])("/exam/api/paper/paper/paper-detail",t)}function s(t){return Object(i["b"])("/exam/api/paper/paper/qu-detail",t)}function l(t){return Object(i["b"])("/exam/api/paper/paper/fill-answer",t)}function c(t){return Object(i["b"])("/exam/api/paper/paper/hand-exam",t)}function o(t){return Object(i["b"])("/exam/api/paper/paper/paper-result",t)}},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),n=a("d8e8"),r=a("4bf8"),s=a("79e5"),l=[].sort,c=[1,2,3];i(i.P+i.F*(s((function(){c.sort(void 0)}))||!s((function(){c.sort(null)}))||!a("2f21")(l)),"Array",{sort:function(t){return void 0===t?l.call(r(this)):l.call(r(this),n(t))}})},"70fe":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"visibility-change",rawName:"v-visibility-change",value:t.visibleChange,expression:"visibleChange"}],staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-card",{staticStyle:{"margin-bottom":"10px"}},[t._v(" 距离考试结束还有："),a("span",{staticStyle:{color:"#ff0000"}},[t._v(t._s(t.hour)+"时"+t._s(t.min)+"分"+t._s(t.sec)+"秒")]),a("el-button",{staticStyle:{float:"right","margin-top":"-10px"},attrs:{type:"warning",icon:"el-icon-plus",loading:t.loading},on:{click:function(e){return t.handHandExam()}}},[t._v(" "+t._s(t.handleText)+" ")])],1)],1),a("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:6,xs:24}},[a("el-card",[a("p",{staticClass:"card-title"},[t._v("答题卡")]),a("el-row",{staticClass:"card-line",staticStyle:{"padding-left":"10px"},attrs:{gutter:24}},[a("el-tag",{attrs:{type:"info"}},[t._v("未作答")]),a("el-tag",{attrs:{type:"success"}},[t._v("已作答")])],1),void 0!==t.paperData.radioList&&t.paperData.radioList.length>0?a("div",[a("p",{staticClass:"card-title"},[t._v("单选题")]),a("el-row",{staticClass:"card-line",attrs:{gutter:24}},t._l(t.paperData.radioList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(" "+t._s(e.sort+1))])})),1)],1):t._e(),void 0!==t.paperData.multiList&&t.paperData.multiList.length>0?a("div",[a("p",{staticClass:"card-title"},[t._v("多选题")]),a("el-row",{staticClass:"card-line",attrs:{gutter:24}},t._l(t.paperData.multiList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(t._s(e.sort+1))])})),1)],1):t._e(),void 0!==t.paperData.judgeList&&t.paperData.judgeList.length>0?a("div",[a("p",{staticClass:"card-title"},[t._v("判断题")]),a("el-row",{staticClass:"card-line",attrs:{gutter:24}},t._l(t.paperData.judgeList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(t._s(e.sort+1))])})),1)],1):t._e(),void 0!==t.paperData.blankList&&t.paperData.blankList.length>0?a("div",[a("p",{staticClass:"card-title"},[t._v("填空题")]),a("el-row",{staticClass:"card-line",attrs:{gutter:24}},t._l(t.paperData.blankList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(t._s(e.sort+1))])})),1)],1):t._e(),void 0!==t.paperData.saqList&&t.paperData.saqList.length>0?a("div",[a("p",{staticClass:"card-title"},[t._v("操作题")]),a("el-row",{staticClass:"card-line",attrs:{gutter:24}},t._l(t.paperData.saqList,(function(e){return a("el-tag",{key:e.id,attrs:{type:t.cardItemClass(e.answered,e.quId)},on:{click:function(a){return t.handSave(e)}}},[t._v(t._s(e.sort+1))])})),1)],1):t._e()],1)],1),a("el-col",{attrs:{span:18,xs:24}},[a("el-card",{staticClass:"qu-content"},[t.quData.content?a("p",[t._v(t._s(t.quData.sort+1)+"."+t._s(t.quData.content))]):t._e(),null!=t.quData.image&&""!==t.quData.image?a("div",[a("el-image",{staticStyle:{"max-width":"100%"},attrs:{src:t.quData.image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("el-link",{attrs:{href:t.quData.image,type:"primary",target:"_blank",icon:"el-icon-files",underline:!0}},[t._v(" 下载附件 ")])],1)])],1):t._e(),1===t.quData.quType||3===t.quData.quType?a("div",[a("el-radio-group",{model:{value:t.radioValue,callback:function(e){t.radioValue=e},expression:"radioValue"}},t._l(t.quData.answerList,(function(e){return a("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.abc)+"."+t._s(e.content)+" "),null!=e.image&&""!==e.image?a("div",{staticStyle:{clear:"both"}},[a("el-image",{staticStyle:{"max-width":"100%"},attrs:{src:e.image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("el-link",{attrs:{href:e.image,type:"primary",target:"_blank",icon:"el-icon-files",underline:!0}},[t._v(" 下载附件 ")])],1)])],1):t._e()])})),1)],1):t._e(),2===t.quData.quType?a("div",[a("el-checkbox-group",{model:{value:t.multiValue,callback:function(e){t.multiValue=e},expression:"multiValue"}},t._l(t.quData.answerList,(function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.abc)+"."+t._s(e.content)+" "),null!=e.image&&""!==e.image?a("div",{staticStyle:{clear:"both"}},[a("el-image",{staticStyle:{"max-width":"100%"},attrs:{src:e.image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("el-link",{attrs:{href:e.image,type:"success",target:"_blank",icon:"el-icon-files",underline:!0}},[t._v(" 下载附件 ")])],1)])],1):t._e()])})),1)],1):t._e(),5===t.quData.quType?a("div",[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"large",placeholder:"请输入答案",clearable:""},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1):t._e(),4===t.quData.quType?a("div",[a("file-upload",{attrs:{"list-type":"office-file",tips:"只能上传.xlsx/.docx/.pptx文件",accept:".xlsx, .docx, .pptx, application/msword, application/pdf"},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1):t._e()]),a("div",{staticStyle:{"margin-top":"20px"}},[t.showPrevious?a("el-button",{attrs:{type:"primary",icon:"el-icon-back"},on:{click:function(e){return t.handPrevious()}}},[t._v(" 上一题 ")]):t._e(),t.showNext?a("el-button",{attrs:{type:"warning",icon:"el-icon-right"},on:{click:function(e){return t.handNext()}}},[t._v(" 下一题 ")]):t._e()],1)],1)],1)],1)},n=[],r=(a("55dd"),a("ac6a"),a("7f7f"),a("db72")),s=a("3200"),l=a("5c96"),c=a("2a75"),o=a("14a5"),u=a("2f62"),d=a("93bf"),p=a.n(d),f={name:"ExamProcess",components:{FileUpload:c["a"]},data:function(){return{isFullscreen:!1,showPrevious:!1,showNext:!0,loading:!1,handleText:"交卷",pageLoading:!1,paperId:"",cardItem:{},allItem:[],quData:{answerList:[]},paperData:{leftSeconds:99999,radioList:[],multiList:[],judgeList:[],blankList:[],saqList:[]},radioValue:"",multiValue:[],answer:"",answeredIds:[],hour:"00",min:"00",sec:"00"}},computed:Object(r["a"])({},Object(u["b"])(["sidebar","avatar","device","name","realName"])),mounted:function(){Object(o["b"])(this.realName,this.name),window.addEventListener("beforeunload",this.beforeUnloadHandler,!1)},destroyed:function(){Object(o["a"])(),window.removeEventListener("beforeunload",this.beforeUnloadHandler,!1)},created:function(){p.a.toggle();var t=this.$route.params.id;"undefined"!==typeof t&&(this.paperId=t,this.fetchData(t))},methods:{beforeUnloadHandler:function(t){t.returnValue="离开此页面？"},countdown:function(){var t=this.paperData.leftSeconds;if(t<0)this.doHandler();else{var e=parseInt(t/3600),a=parseInt(t/60%60),i=parseInt(t%60);this.hour=e>9?e:"0"+e,this.min=a>9?a:"0"+a,this.sec=i>9?i:"0"+i;var n=this;this.paperData.leftSeconds-=1,setTimeout((function(){n.countdown()}),1e3)}},cardItemClass:function(t,e){return e===this.cardItem.quId?"warning":t?"success":t?void 0:"info"},countNotAnswered:function(){var t=0;return this.paperData.radioList.forEach((function(e){e.answered||(t+=1)})),this.paperData.multiList.forEach((function(e){e.answered||(t+=1)})),this.paperData.judgeList.forEach((function(e){e.answered||(t+=1)})),this.paperData.saqList.forEach((function(e){e.answered||(t+=1)})),this.paperData.blankList.forEach((function(e){e.answered||(t+=1)})),t},handNext:function(){var t=this.cardItem.sort+1;this.handSave(this.allItem[t])},handPrevious:function(){var t=this.cardItem.sort-1;this.handSave(this.allItem[t])},doHandler:function(){var t=this;this.handleText="正在交卷，请等待...",this.loading=!0;var e={id:this.paperId};Object(s["c"])(e).then((function(){t.$message({message:"试卷提交成功！",type:"success"}),t.isFullscreen=!t.isFullscreen,p.a.toggle(),t.$router.push({name:"ExamOnline"})}))},handHandExam:function(){var t=this;this.handSave(this.cardItem,(function(){var e=t.countNotAnswered(),a="确认要交卷吗？";e>0&&(a="您还有"+e+"题未作答，确认要交卷吗?"),t.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.doHandler()})).catch((function(){t.$message({type:"info",message:"交卷已取消，您可以继续作答！"})}))}))},handSave:function(t,e){var a=this;t.id===this.allItem[0].id?this.showPrevious=!1:this.showPrevious=!0;var i=this.allItem.length-1;t.id===this.allItem[i].id?this.showNext=!1:this.showNext=!0;var n=this.multiValue;""!==this.radioValue&&n.push(this.radioValue);var r={quType:this.cardItem.quType,paperId:this.paperId,quId:this.cardItem.quId,answers:n,answer:4===this.cardItem.quType||5===this.cardItem.quType?this.answer:""};Object(s["b"])(r).then((function(){n.length>0||""!==r.answer?a.cardItem.answered=!0:a.cardItem.answered=!1,e&&e(),a.fetchQuData(t)}))},fetchQuData:function(t){var e=this,a=l["Loading"].service({text:"拼命加载中",background:"rgba(0, 0, 0, 0.7)"});this.cardItem=t;var i={paperId:this.paperId,quId:t.quId};Object(s["f"])(i).then((function(t){e.quData=t.data,e.radioValue="",e.multiValue=[],e.quData.answerList.forEach((function(t){1!==e.quData.quType&&3!==e.quData.quType||!t.checked||(e.radioValue=t.id),2===e.quData.quType&&t.checked&&e.multiValue.push(t.id)})),4!==e.quData.quType&&5!==e.quData.quType||(e.answer=e.quData.answer),a.close()}))},fetchData:function(t){var e=this,a={id:t};Object(s["d"])(a).then((function(t){e.paperData=t.data,e.paperData.radioList?e.cardItem=e.paperData.radioList[0]:e.paperData.multiList?e.cardItem=e.paperData.multiList[0]:e.paperData.judgeList?e.cardItem=e.paperData.judgeList[0]:e.paperData.blankList?e.cardItem=e.paperData.blankList[0]:e.paperData.saqList&&(e.cardItem=e.paperData.saqList[0]);var a=e;e.paperData.radioList.forEach((function(t){a.allItem.push(t)})),e.paperData.multiList.forEach((function(t){a.allItem.push(t)})),e.paperData.judgeList.forEach((function(t){a.allItem.push(t)})),e.paperData.blankList.forEach((function(t){a.allItem.push(t)})),e.paperData.saqList.forEach((function(t){a.allItem.push(t)})),e.fetchQuData(e.cardItem),e.countdown()}))}}},h=f,m=(a("c7ac"),a("2877")),v=Object(m["a"])(h,i,n,!1,null,"93c32d20",null);e["default"]=v.exports},"767c":function(t,e,a){},c7ac:function(t,e,a){"use strict";a("767c")}}]);